* Installation
1. Install ~nix~ daemon
2. Install ~nix-darwin~
3. Remove the default ~~/.config/nixpkgs~ and ~git clone https://github.com/lccambiaghi/nixpkgs~
5. ~./update-dependencies.sh~
6. ~./switch.sh~

* nix-darwin
Documentation: https://daiderd.com/nix-darwin/manual/index.html#sec-options
** Rebuild switch
#+BEGIN_SRC sh
darwin-rebuild switch -I darwin-config=$HOME/.config/nixpkgs/darwin/configuration.nix
#+END_SRC
** How does it work?
- ~darwin/configuration.nix~ is the main entrypoint. It imports ~home-manager~ as module and its config from ~home-manager/configuration.
** Flake
#+begin_src sh
darwin-rebuild switch --flake ~/.config/darwin
#+end_src
* niv
You add (and pin) channels in ~nix/sources.json~ and then run ~./update-dependencies.sh~

* What is important?
- ~emacs~
- ~git~
- ~shell~
- ~cli~ with ~home.packages~
- ~gui~ (with ~environment.systemPackages~?)
- ~dotfiles~
- ~env~ variables (with ~/.env~?)
* What is missing?
- ~emacs~ + ~doom~
- ~.ssh/id_rsa~
- ~.gnupg~
- R + packages
