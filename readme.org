* Installation
1. Install ~nix~ daemon
2. Install ~nix-darwin~
3. Remove the default ~~/.config/nixpkgs~ and ~git clone https://github.com/lccambiaghi/nixpkgs~
5. ~./update-dependencies.sh~
6. ~./switch.sh~

Maybe you don't need these anymore?
7. ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
8. ~brew bundle~

* nix-darwin
Documentation: https://daiderd.com/nix-darwin/manual/index.html#sec-options
** Rebuild
#+BEGIN_SRC sh
darwin-rebuild switch -I darwin-config=$HOME/.config/nixpkgs/darwin-configuration.nix
#+END_SRC
** How does it work?
- ~darwin-configuration.nix~ is the main entrypoint, it imports modularized configs:
  + ~config.nix~ is where the magic happens. Among other things, it imports overlays:
    + ~./overlays/emacs/default.nix~ declares Emacs
** TODO
- ~wm.nix~ with ~yabai~ and ~skhd~
* niv
You add (and pin) channels in ~nix/sources.json~ and then run ~./update-dependencies.sh~

* What is important?
- ~emacs~
- ~git~
- ~shell~
- ~cli~ with ~home.packages~
- ~gui~ (with ~environment.systemPackages~?)
- ~dotfiles~
- ~env~ variables (with ~/.env~?)
* What is missing?
- ~brew~ with:
  + ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
- ~emacs~ + ~doom~
- ~.ssh/id_rsa~
- ~.gnupg~
- R + packages
- pyright
